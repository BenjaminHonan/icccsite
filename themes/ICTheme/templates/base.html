<!DOCTYPE html>
<html lang="{% block html_lang %}{{ DEFAULT_LANG }}{% endblock %}">

<head>
  <title>{% block title %}{{ SITENAME }}{% endblock %}</title>
  <!-- Using the latest rendering mode for IE -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> {% if FAVICON %}
  <link href="{{ SITEURL }}/{{ FAVICON }}" rel="icon"> {% endif %} {% block meta %}
  <meta name="author" content="{{ AUTHOR }}" /> {% endblock %}

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700,900,100,500" type="text/css" />
  <link rel="stylesheet" href="{{ SITEURL }}/theme/css/main.css" type="text/css" />
  <link rel='stylesheet' media='screen and (max-width: 750px)' href='{{ SITEURL }}/theme/css/mobile.css' />
  <script src="{{ SITEURL }}/theme/js/jquery.js"></script>

  <!-- script for opening/closing of sidebar on mobiles and ensuring it is visible if the viewport is enlarged beyond the mobile view-->
  <script>
    $(function() {
      $('div.banner').click(function() {
        if ($(window).width() < 750) {
            $('div.left-col').toggleClass("left-col-show");
            $('body').css("scroll-y", "hidden")
        }
      });
    });
    $(window).resize(function() {
      if (!($(window).width() < 750)) {
        $(".left-col").removeAttr('style');;
      }
    });
  </script>
  <!-- Script to ensure banner does not overlap centercol and that the logo is the same height as the banner-->
  <!-- Also ensures that the caver image is a sutiable size for the page (so you dont just see his butt)-->
  <!-- Also ensures that anchor links are offset so the content isnt under the banner -->
  <script>
    function bannerresizer() {
      if (!($(window).width() < 750)) {
        $(".center-col").css("margin-top", $(".banner").height());
        $(".logo").css("min-height", $(".banner").height());
        $(".logo").css("height", $(".banner").height());
        //$(".logo img").css("padding-top", ($(".banner").height() - 100) / 2);
        $(".anchor").css("margin-top", -$(".banner").height())
      } else {
        $(".center-col").css("margin-top", $(".banner").height());
        $(".anchor").css("margin-top", -$(".banner").height())
      }
    }

    function caverresizer() {
      var viewportHeight = $(window).height();
      var bannerHeight = $(".banner").height();
      if (viewportHeight - bannerHeight < 689) {
        $(".right-col").css({"background-size": 'auto ' + String(viewportHeight - bannerHeight) + 'px'});
      }
    }

    $(window).resize(function() {
      bannerresizer();
      caverresizer();
    });
    $(window).load(function() {
      caverresizer();
      bannerresizer();
    });
  </script>
  <!--Google Analytics Tracking-->
  <script>
    (function(i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function() {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-80065-2', 'auto');
    ga('send', 'pageview');
  </script>

  {% block head %} {% endblock %}

</head>

<body>
  <div class="banner">
    <div class="menu-icon">&#x2630;</div>
    <!--<div class="logo"><img src="{{ SITEURL }}/assets/sidebariclogo.png"></div>-->
    <div class="banner-title">
      {% block banner %}{% endblock %}
    </div>
    <div class="banner-title-logo"><img alt="Imperial College Caving Club logo" src="{{ SITEURL }}/assets/sidebariclogo.png"></div>
  </div>


  <div style="clear: both;"></div>

  <div class="left-col">
    {% include 'includes/sidebar.html' %}
  </div>

  <div style="clear: both;"></div>

  <div class="center-col">
    {% block content %} {% endblock %}
  </div>

  <div class="right-col">
  </div>


</body>

</html>
